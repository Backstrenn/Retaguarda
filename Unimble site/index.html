<div class="container">
  <div class="content-wrapper">
    <img
      src="https://cdn.builder.io/api/v1/image/assets/TEMP/94608a2f5749a68d867453519cfc92aadada5c2f9cf5b9259027ab768e153bfa?apiKey=11b6593f692044c089aa40249f46effd&"
      alt="Logo" class="logo" />
    <h1 class="title">Retaguarda</h1>
    <p class="subtitle">Tipo de dado</p>
    <div class="main-content">
      <div class="columns">
        <div class="left-column">
          <link rel="stylesheet" href="css/styles.css">
          <div class="item-type-card">
            <div class="data-type">
              <img
                src="https://cdn.builder.io/api/v1/image/assets/TEMP/195054ee5e4992ebba1cdbd7cef9f12dd1c8f88449d1a6352ffdc9aa8b881e1d?apiKey=11b6593f692044c089aa40249f46effd&"
                alt="Item Type Icon" class="item-type-icon" />
              <span class="item-type-label">Tipo de Item</span>
            </div>
            <div class="item">
              <img
                src="https://cdn.builder.io/api/v1/image/assets/TEMP/7b695811200ff10a1cba6a71a302147c7f7678a284571a4ab2ac4968d8717836?apiKey=11b6593f692044c089aa40249f46effd&"
                alt="Item Icon" class="item-icon" />
              <span class="item-label">Item</span>
            </div>
            <div class="item-type">
              <img
                src="https://cdn.builder.io/api/v1/image/assets/TEMP/c786e5da89b23fdde8aa7bd89401560f6116c2e8e549893359894bab49706ec1?apiKey=11b6593f692044c089aa40249f46effd&"
                alt="Data Type Icon" class="data-type-icon" />
              <span class="data-type-label">Tipo de dado</span>
            </div>
            <div class="data">
              <img
                src="https://cdn.builder.io/api/v1/image/assets/TEMP/8f13c4273067392fd4f43c23707664b705d0a1eed113392511d8dd79547eb572?apiKey=11b6593f692044c089aa40249f46effd&"
                alt="Data Icon" class="data-icon" />
              <span class="data-label">Dado</span>
            </div>
            <div class="profile">
              <img
                src="https://cdn.builder.io/api/v1/image/assets/TEMP/009f9cd9bbb2186e120a48e5c4c59c8c21f06b7413bba392e596af77f0c32b22?apiKey=11b6593f692044c089aa40249f46effd&"
                alt="Profile Icon" class="profile-icon" />
              <span class="profile-label">Perfil</span>
            </div>
            <div class="permissions">
              <img
                src="https://cdn.builder.io/api/v1/image/assets/TEMP/433eb63b1239e7465bd71a88064b6838902554db4af9e3f2eaaf26d4dada1aa1?apiKey=11b6593f692044c089aa40249f46effd&"
                alt="Permissions Icon" class="permissions-icon" />
              <span class="permissions-label">Permissões</span>
            </div>
            <div class="create-user">
              <img
                src="https://cdn.builder.io/api/v1/image/assets/TEMP/38def88f0cbbf46f2d8631b94926892f06a1119ff72302e4d265e1a942ad1a3c?apiKey=11b6593f692044c089aa40249f46effd&"
                alt="Create User Icon" class="create-user-icon" />
              <div class="create-user-content">
                <span class="create-user-title">Criar Usuário</span>
                <span class="create-user-subtitle">Vamos começar!!!</span>
              </div>
            </div>
          </div>
        </div>
        <div class="right-column">
          <div class="item-details-card">
            <label for="itemName1" class="item-name-label">Nome do Dado</label>
            <input type="text" id="itemName1" class="item-name-input" placeholder="Nome do dado"
              aria-label="Nome do dado" />
            <label for="itemName2" class="item-name-label-2">Campo HTML</label>
            <input type="text" id="itemName2" class="item-name-input-2" placeholder="Campo HTML Nº 1 a 5"
              aria-label="Campo HTML" />
            <button class="save-button" onclick="saveDataType()">Salvar</button>
          </div>
          <br>
          <div class="item-details-card">
            <table>
              <thead>
                <tr>
                  <th>Nome</th>
                  <th>Campo HTML</th>
                </tr>
              </thead>
              <tbody id="dataTypeList"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<script>
  const SUPABASE_URL = 'https://enrwqpgldrzrybbunzjz.supabase.co';
  const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVucndxcGdsZHJ6cnliYnVuemp6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTgxMDk2NjEsImV4cCI6MjAxMzY4NTY2MX0.v5U-53NdZqWE14SMbmnC6_Iy1lIQ3OcF6C6W6CybH0U';
  const supa = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  async function saveDataType() {
    const name = document.getElementById('itemName1').value;
    const html = document.getElementById('itemName2').value;

    if (html > 15 || html < 1) return alert("Informe um valor valido para campo HTML")

    if (name.length == 0) return alert("Informe um nome valido");

    const { data, error } = await supa.from("TipoDeDado").insert([{ nomedodado: name, campohtml: html }]);

    if (error == null) {
      alert("Item cadastrado com sucesso");
      refreshList(data);

      document.getElementById('itemName1').value = "";
      document.getElementById('itemName2').value = "";
    }
  }

  async function refreshList(newAppend = null) {
    const { data, error } = await supa.from("TipoDeDado").select("*");

    if (error == null) {
      if (newAppend != null) data.push(newAppend);

      let html = "";

      data.forEach((item) => {
        html += `
          <tr>
              <td>${item.nomedodado}</td>
              <td>${item.campohtml}</td>
          </tr>
        `
      })

      document.getElementById("dataTypeList").innerHTML = html
    }
  }

  refreshList();
</script>